<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visualizador de Markdown con Marked.js y LaTeX</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">
  <!-- Solo una versión de KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #e6e3f0;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 15px;
      background: linear-gradient(90deg, #7a5af5, #b8a8ff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 2px 10px rgba(122, 90, 245, 0.2);
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.8;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .latex-info {
      background: rgba(122, 90, 245, 0.15);
      border-radius: 8px;
      padding: 15px;
      margin: 15px auto;
      max-width: 700px;
      border-left: 3px solid #7a5af5;
    }

    .latex-info h3 {
      color: #b8a8ff;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .latex-info ul {
      padding-left: 20px;
      margin-top: 10px;
    }

    .latex-info li {
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .latex-info code {
      background: rgba(0, 0, 0, 0.3);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
    }

    .content-wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      margin-bottom: 40px;
    }

    .editor-container, .preview-container {
      flex: 1;
      min-width: 300px;
    }

    h2 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: #b8a8ff;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .editor {
      background: rgba(26, 27, 38, 0.7);
      border: 1px solid #3d3a50;
      border-radius: 8px;
      padding: 20px;
      height: 400px;
      margin-bottom: 20px;
    }

    #markdown-input {
      width: 100%;
      height: 100%;
      background: transparent;
      border: none;
      color: #c0caf5;
      font-size: 1rem;
      line-height: 1.5;
      resize: none;
      outline: none;
      font-family: 'Fira Code', 'Consolas', monospace;
    }

    .editor-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .btn {
      background: linear-gradient(135deg, #7a5af5, #5d4dcc);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(122, 90, 245, 0.4);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn-clear {
      background: linear-gradient(135deg, #ff6b6b, #ff5252);
    }

    .btn-clear:hover {
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
    }

    /* IA Response Box */
    .ia-response {
      background: linear-gradient(135deg, #1a1b26 0%, #16161e 100%);
      border-left: 4px solid #7a5af5;
      border-radius: 8px;
      padding: 15px 20px;
      margin: 0;
      position: relative;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      min-height: 400px;
      overflow-y: auto;
    }

    .ia-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }

    .ia-conteiner-header-text {
      display:flex;
      align-items: center;
      gap:10px;
    }

    .ia-header-text {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-left: auto;
    }

    .ia-logo {
      width: 28px;
      height: 28px;
      filter: drop-shadow(0 0 5px rgba(122, 90, 245, 0.7));
    }

    .ia-title {
      color: #e6e3f0;
      font-weight: 700;
      font-size: 1.1em;
      letter-spacing: 0.5px;
      margin: 0;
    }

    .ia-type {
      color:#999999;
      font-style: italic;
      font-size: 14px;
    }

    .ia-content {
      color: #c0caf5;
      line-height: 1.6;
      font-size: 0.95em;
    }

    /* Estilos para el contenido Markdown renderizado */
    .ia-content h1, .ia-content h2, .ia-content h3 {
      color: #b8a8ff;
      margin-top: 1.5em;
      margin-bottom: 0.8em;
    }

    .ia-content h1 {
      font-size: 1.8em;
      border-bottom: 2px solid #3d3a50;
      padding-bottom: 0.3em;
    }

    .ia-content h2 {
      font-size: 1.5em;
    }

    .ia-content p {
      margin-bottom: 1.2em;
      line-height: 1.7;
    }

    .ia-content a {
      color: #7a5af5;
      text-decoration: none;
    }

    .ia-content a:hover {
      text-decoration: underline;
    }

    .ia-content ul, .ia-content ol {
      margin-left: 20px;
      margin-bottom: 1.5em;
    }

    .ia-content li {
      margin-bottom: 0.5em;
    }

    .ia-content blockquote {
      border-left: 4px solid #7a5af5;
      padding: 0.5em 1em;
      margin: 1.5em 0;
      background: rgba(122, 90, 245, 0.1);
      border-radius: 0 4px 4px 0;
    }

    .ia-content pre {
      background: #16161e;
      border-radius: 8px;
      padding: 1em;
      overflow-x: auto;
      margin: 1.5em 0;
      border: 1px solid #3d3a50;
    }

    .ia-content code {
      font-family: 'Fira Code', 'Consolas', monospace;
      background: rgba(26, 27, 38, 0.7);
      padding: 0.2em 0.4em;
      border-radius: 4px;
      font-size: 0.9em;
    }

    .ia-content table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5em 0;
    }

    .ia-content th, .ia-content td {
      border: 1px solid #3d3a50;
      padding: 0.8em;
      text-align: left;
    }

    .ia-content th {
      background: rgba(122, 90, 245, 0.2);
    }
    
    /* Estilos para ecuaciones LaTeX */
    .katex {
      font-size: 1.1em !important;
    }
    
    .katex-display {
      margin: 1em 0;
      padding: 0.5em;
      overflow-x: auto;
      overflow-y: hidden;
      background: rgba(26, 27, 38, 0.7);
      border-radius: 6px;
      border: 1px solid #3d3a50;
    }
    
    .katex-display > .katex {
      display: inline-block;
      white-space: nowrap;
    }
    
    /* Estilo específico para ecuaciones en línea */
    .ia-content p .katex {
      display: inline;
      white-space: nowrap;
    }
    
    .katex-inline {
      display: inline;
      white-space: nowrap;
      padding: 0 2px;
    }

    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }

    .feature-card {
      background: rgba(26, 27, 38, 0.7);
      border-radius: 12px;
      padding: 25px;
      border: 1px solid #3d3a50;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .feature-card h3 {
      color: #b8a8ff;
      margin-bottom: 15px;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .feature-icon {
      background: linear-gradient(135deg, #7a5af5, #5d4dcc);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    footer {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      font-size: 0.9rem;
      color: #999;
      border-top: 1px solid #3d3a50;
    }

    @media (max-width: 768px) {
      .content-wrapper {
        flex-direction: column;
      }
      
      .editor, .ia-response {
        height: auto;
        min-height: 300px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>Visualizador de Markdown con Soporte LaTeX</h1>
      <p class="subtitle">Escribe contenido Markdown y fórmulas matemáticas usando sintaxis LaTeX</p>
      
      <div class="latex-info">
        <h3>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7a5af5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
          </svg>
          Sintaxis LaTeX Disponible
        </h3>
        <ul>
          <li>Ecuaciones en línea: <code>$e^{i\pi} + 1 = 0$</code></li>
          <li>Ecuaciones en bloque: <code>$$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$</code></li>
          <li>Soporte para fracciones: <code>$\frac{a}{b}$</code></li>
          <li>Soporte para matrices: <code>$$\begin{matrix} a & b \\ c & d \end{matrix}$$</code></li>
          <li>Soporte para símbolos griegos: <code>$\alpha, \beta, \gamma$</code></li>
        </ul>
      </div>
    </header>

    <div class="content-wrapper">
      <div class="editor-container">
        <h2>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#b8a8ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 20h20M3 17h18M4 14h16M5 11h14M6 8h12M7 5h10"/>
          </svg>
          Editor Markdown + LaTeX
        </h2>
        <div class="editor">
          <textarea id="markdown-input" placeholder="Escribe tu contenido Markdown y fórmulas LaTeX aquí...">## Bienvenido al Visualizador de Markdown con LaTeX

Este editor soporta tanto sintaxis Markdown como ecuaciones matemáticas con LaTeX.

### Ejemplos de LaTeX

**Ecuaciones en línea:** 
La famosa identidad de Euler: $e^{i\pi} + 1 = 0$ es considerada la ecuación más hermosa en matemáticas.

**Ecuaciones en bloque:**
$$
\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}
$$

**Fracciones y matrices:**
$$
\begin{bmatrix}
1 & 2 \\
3 & 4 \\
\end{bmatrix}
\times
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix}
= \begin{bmatrix}
a+2c & b+2d \\
3a+4c & 3b+4d \\
\end{bmatrix}
$$

**Símbolos griegos:**
$\alpha, \beta, \gamma, \delta, \Delta, \theta, \lambda, \mu, \pi, \Pi, \sigma, \Sigma, \phi, \Phi, \omega, \Omega$

### Características soportadas:
- **Texto en negrita** y *cursiva*
- Listas ordenadas y no ordenadas
- [Enlaces](https://example.com)
- Código y bloques de código
- Tablas
- Citas

```javascript
// Ejemplo de código JavaScript
function saludar(nombre) {
  return `¡Hola, ${nombre}!`;
}

console.log(saludar('Mundo'));
```</textarea>
        </div>
        <div class="editor-toolbar">
          <button class="btn btn-clear" id="clear-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            Limpiar
          </button>
        </div>
      </div>
      
      <div class="preview-container">
        <h2>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#b8a8ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
          Vista Previa
        </h2>
        <div class="ia-response">
          <div class="ia-header">
            <div class="ia-conteiner-header-text">
              <svg class="ia-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28">
                <path fill="#7a5af5" d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"/>
                <path fill="#7a5af5" d="M12,7a5,5,0,1,0,5,5A5,5,0,0,0,12,7Zm0,8a3,3,0,1,1,3-3A3,3,0,0,1,12,15Z"/>
              </svg>
              <h3 class="ia-title">Vista Previa</h3>
            </div>
            <div class="ia-type">Markdown + LaTeX Renderizado</div>
          </div>
          <div id="preview" class="ia-content"></div>
        </div>
      </div>
    </div>
    
    <div class="features">
      <div class="feature-card">
        <h3>
          <span class="feature-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
          </span>
          Soporte LaTeX Completo
        </h3>
        <p>Renderiza ecuaciones matemáticas complejas con sintaxis LaTeX tanto en línea como en bloques.</p>
      </div>
      <div class="feature-card">
        <h3>
          <span class="feature-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
          </span>
          Vista Previa en Tiempo Real
        </h3>
        <p>Ve cómo tu Markdown y ecuaciones LaTeX se convierten en HTML formateado al instante.</p>
      </div>
      <div class="feature-card">
        <h3>
          <span class="feature-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="16 18 22 12 16 6"></polyline>
              <polyline points="8 6 2 12 8 18"></polyline>
            </svg>
          </span>
          Resaltado de Código
        </h3>
        <p>Los bloques de código se resaltan automáticamente para una mejor legibilidad.</p>
      </div>
    </div>
    
    <footer>
      <p>Visualizador de Markdown con Soporte LaTeX &copy; 2023</p>
    </footer>
  </div>

  <!-- Scripts al final para mejor rendimiento -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <!-- Solo una versión de KaTeX -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
  
  <script>
    // Configurar marked para usar highlight.js
    marked.setOptions({
      highlight: function(code, lang) {
        const language = hljs.getLanguage(lang) ? lang : 'plaintext';
        return hljs.highlight(code, { language }).value;
      },
      langPrefix: 'hljs language-'
    });

    // Obtener elementos del DOM
    const markdownInput = document.getElementById('markdown-input');
    const preview = document.getElementById('preview');
    const clearBtn = document.getElementById('clear-btn');

    // Función para actualizar la vista previa
    function updatePreview() {
      const markdownText = markdownInput.value;
      const html = marked.parse(markdownText);
      preview.innerHTML = html;
      
      // Resaltar bloques de código
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightElement(block);
      });
      
      // Renderizar ecuaciones LaTeX
      if (window.renderMathInElement) {
        renderMathInElement(preview, {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\(", right: "\\)", display: false},
            {left: "\\[", right: "\\]", display: true}
          ],
          throwOnError: false,
          ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        });
      }
    }

    // Inicializar la vista previa cuando KaTeX esté listo
    document.addEventListener('DOMContentLoaded', function() {
      // Esperar a que KaTeX esté completamente cargado
      const checkKaTeX = setInterval(() => {
        if (window.renderMathInElement) {
          clearInterval(checkKaTeX);
          updatePreview();
          
          // Escuchar el evento input en el textarea
          markdownInput.addEventListener('input', updatePreview);

          // Limpiar el editor
          clearBtn.addEventListener('click', () => {
            markdownInput.value = '';
            updatePreview();
          });
        }
      }, 100);
    });
  </script>
</body>
</html>